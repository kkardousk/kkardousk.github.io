{
  "hash": "63573f695e20ca3a5e3a7a79af667aa3",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: |\n  <div class=\"custom-title-block\">\n    <span style=\"color:#000000; font-size:1em;\">Replication of below article's Data and Visualizations</span><br>\n    <span style=\"color:#333333; font-size:0.7em;\">\"Has International Travel to the U.S. Really Collapsed?</span><br>\n    <span style=\"color:#666666; font-size:0.5em; white-space: nowrap;\">\n      By <a href=\"https://www.nytimes.com/interactive/2025/04/30/world/us-travel-decline.html\" \n      target=\"_blank\" style=\"color:#000000; text-decoration:underline;\">Josh Holder, Niraj Chokshi and Samuel Granados\"</a>\n    </span><br>\n    <span style=\"font-size:0.7em; color:#333333;\">\n      Karim K. Kardous\n      <a href='mailto:kardouskarim@gmail.com' style='margin-left: 9px; font-size: 0.9em;'>\n        <i class='bi bi-envelope'></i>\n      </a>\n      <a href='https://github.com/kkardousk' style='margin-left: 5px; font-size: 0.9em;'>\n        <i class='bi bi-github'></i>\n      </a>\n    </span>\n  </div>\nformat:\n  html:\n    toc: true\n    toc-depth: 4\n    toc-expand: true\n    toc-title: 'Jump To'\n    number-depth: 2\n    fig-format: retina\n    fig-dpi: 300\n    code-link: true # requires both downlit and xml2 to be downloaded\n    code-fold: true\n    code-summary: '<i class=\"bi-code-slash\"></i> Show the code'\n    # code-overflow: wrap\n    code-tools:\n      toggle: true  # adds \"Show All / Hide All\"; also allows for all code copy (at once as quarto doc)\n    css: styles.css\n    highlight-style: github-dark\n    df-print: paged\n    page-layout: article\n    embed-resources: true\n    smooth-scroll: true\n    link-external-icon: false\n    link-external-newwindow: true\n    fontsize: 1.1em\n    linestretch: 0\n    linespace: 0\n    html-math-method: katex\n    linkcolor: '#D35400'\nexecute:\n  echo: true\n  warning: false\n  message: false\n  info: false\n  cache: true\n  freeze: auto\neditor: visual\n---\n\n\n\n##  {.text-justify}\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#|echo: false\n#|message: false\n#|warning: false\n#|include: false\n# check if the required package 'emo' is installed;\n# if not, it might mean your renv environment is not fully restored.\n# running `renv::restore()` will install all necessary packages\n# to ensure consistent package versions for building this quarto document,\n# effectively 'containerizing' your project and protecting it from future package changes.\nif (!requireNamespace(\"emo\", quietly = TRUE)) {\n  message(\"\\nIt looks like your environment might not be restored.\\nRun `renv::restore()` to install required packages.\\n\")\n}\n\n# load packages\nlibrary(xml2)\nlibrary(downlit)\nlibrary(gdtools)\nlibrary(tidyverse)\nlibrary(quarto)\nlibrary(chromote)\nlibrary(here)\nlibrary(tidycensus)\nlibrary(janitor)\nlibrary(purrr)\nlibrary(ggtext)\nlibrary(ggshadow)\nlibrary(ggiraph)\nlibrary(gfonts)\nlibrary(showtext)\nlibrary(ggborderline)\nlibrary(grid)\nlibrary(patchwork)\nlibrary(shiny)\nlibrary(gt)\nlibrary(rsvg)\nlibrary(magick)\nlibrary(stringr)\nlibrary(ggimage)\nlibrary(emo)\n\n\nfont_add(family = \"franklin-medium\", regular = \"renv/library/macos/R-4.5/aarch64-apple-darwin20/sysfonts/fonts/Libre_Franklin/static/LibreFranklin-Medium.ttf\") \n\ntheme_set_custom <- function() {\n  \n  # load google fonts \n  sysfonts::font_add_google(\"Libre Franklin\", \"franklin\") # libre franklin is a solid free alternative to an otherwise proprietary nyt-franklin\n  # local font; for rare cases where requiring midway bettween plain and bold\n  sysfonts::font_add(family = \"franklin-medium\", regular = \"renv/library/macos/R-4.5/aarch64-apple-darwin20/sysfonts/fonts/Libre_Franklin/static/LibreFranklin-Medium.ttf\") # this is a closer match to plot subtitles for first visual\n  showtext::showtext_auto()\n\n  # apply ggplot2 theme; can always be overwritten\n  ggplot2::theme_set(\n    ggplot2::theme_minimal()\n    )\n}\n\ntheme_set_custom()\n```\n:::\n\n\n## _International Travel Into the US Prelude_ {.text-justify}\n**About the data/article in a nutshell:** This New York Times article, backed by numbers from government agencies for the US & Canada, attempts to show whether International Travel into the US has dipped as a result of President Trump's administration and policies relating to broad tariffs, tight border control, etc. <br>\nThe **main takeaway** is that while travel originating from Asia into the United States has timidly increased, that from Europe has stalled, meanwhile that of Canada has sharply decreased, especially when it comes to car crossings into the US; relative to air travel.<br>\nDespite a drastic drop for US bound travel from Canada, overall, travel into the United States has remained fairly undisturbed. \n\nIf you like to give the original article a read, you can find it [here](https://www.nytimes.com/interactive/2025/04/30/world/us-travel-decline.html).\n\n**Overall Strategy for building first plot:** One way to recreate the first visual; which shows in a report-card style the % change in flight bookings into the US comparing (Jan 1st through April 26, 2024) to (same period this year), and looking at 1) overall (International), 2) European, 3) Asian, and 4) Canadian inbound travel; is to generate 4 tiles with a subtle vertical tick/separator between each of those said 4 percentages. The time frame of visits for both years covers Summer; which allows for 'apples to apples' comparisons but also focuses on an upcoming period of the year - very near future, meaning that said bookings are more likely than not to be definitive for a vast majority of them. \nBelow I share code and output for said method.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#|echo: false\n#|message: false\n#|warning: false\n#|include: true\n\ntheme_set_custom()\n\np1_tribble <- tribble(\n  ~perc_change, ~label, ~region, ~fill, ~width_cm, ~ length_cm, \n  '-1.5%', 'International arrivals\\n at U.S. airports', 'International','#969696', 170 / 300 * 2.54, 80 / 300 * 2.54, # converting into actual cm, controlling for resolution set (300 or print quality)\n  '-2%', 'Summer flight\\n bookings from Europe', 'Europe', '#969696', 130 / 300 * 2.54, 77 / 300 * 2.54,\n  '+4%', 'Summer flight\\n bookings from Asia', 'Asia', '#2b9d6c', 130 / 300 * 2.54, 77/ 300 * 2.54,\n  '-21%', 'Summer flight\\n bookings from Canada', 'Canada', '#d65f00', 164 / 300 * 2.54, 77 / 300 * 2.54\n)\n\n# Modified function to accept and use the 'label' for the title\ntile_plot_rounded <- function(perc_change, label_text, fill, width_cm, length_cm, scaler = 3) { # 3 was best here\n  library(grid) \n  \n  ggplot() +\n    ggtitle(label_text) + # set the label as the plot sub-title\n    annotation_custom(\n      grob = roundrectGrob(\n        width = unit(width_cm * scaler, \"cm\"),    \n        height = unit(length_cm * scaler, \"cm\"), \n        r = unit(0.1, \"npc\"),  # corner radius, the higher the values the more prononcoumced the roundedness\n        gp = gpar(fill = fill, col = NA)\n      ),\n      xmin = 0, xmax = 6, ymin = 0, ymax = 3\n    ) +\n    annotate(\n    \"text\", \n      x = 3, y = 1.5,\n      hjust = 0.5, vjust = 0.5,\n      size = 10, # text size for perc_change\n      label = perc_change,\n      color = 'white', \n      family = 'franklin',\n      fontface = 'bold'\n    ) +\n    xlim(0, 6) + ylim(0, 3) +\n    coord_fixed(ratio = 1) + \n    theme_void() +\n    theme(\n      plot.margin = margin(4, 2, 2, 2), # small margins add around each plot for more subtitile room\n      plot.title = element_text(hjust = 0.5, size = 14, family = 'franklin-medium', margin = margin(b = 5)) \n    )\n}\n# loop through labels, fills, and dimensions, and including 'label' for the title\ntile_plots <- pmap(\n  list(\n    perc_change = p1_tribble$perc_change,\n    label_text = p1_tribble$label, \n    fill = p1_tribble$fill,\n    width_cm = p1_tribble$width_cm,\n    length_cm = p1_tribble$length_cm\n  ),\n  tile_plot_rounded \n)\n\n# Arrange plots in one row\np1 <- wrap_plots(\n  tile_plots, nrow = 1\n) \n\np_final <- p1 + \n  plot_annotation(\n    title = 'Travel compared with last year',\n    theme = theme(plot.title = element_text(size = 20, family = 'franklin', face = \"bold\", hjust = 0.5, margin = margin(t = -10, b = 10)))\n  )\np_final\n```\n\n::: {.cell-output-display}\n![](holder-chokshi-granados-article-TravelToUS_files/figure-html/unnamed-chunk-2-1.png){width=2700}\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\n<script src=\"site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}